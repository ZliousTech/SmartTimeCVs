@{
    ViewData["HideSidebars"] = true;
    ViewData["Title"] = "Customers";
    ViewData["ControllerName"] = "Customer";
    ViewData["Path"] = "Customer / Index";
    ViewData["Icon"] = "assignment_ind";
}

@section Styles {
    <link rel="stylesheet" href="~/theme/assets/css/plugins/datatables.bootstrap4.min.css" />
    <link rel="stylesheet" href="~/lib/animate.css/animate.min.css" />
    <style>
        .disabled-link {
            pointer-events: none;
            opacity: 0.6 !important;
            cursor: not-allowed;
        }
    </style>
}

<div class="card shadow-sm">
    <div class="card-header">
        <div class="row">
            <div class="col-6"><i class="material-icons breadcrumb theme-main-color align-self-center">@ViewData["Icon"]</i></div>
        </div>
    </div>
    <div class="card-body">
        <div class="body table-responsive">
            <div class="row clearfix mb-3">
                <div class="col-md-6">
                    <h2 class="card-inside-title mb-2">National Number <span class="text-danger">*</span></h2>
                    <div class="form-group form-float">
                        <input id="nationalNumber" type="text" class="form-control" placeholder="National Number">
                    </div>
                </div>
                <div class="col-md-6 mt-2" style="text-align: end;">
                    <a id="startBtn" asp-controller="Customer" asp-action="GetCustomer" asp-route-nationalId=""
                       class="btn btn-lg btn-round btn-primary font-bold waves-effect float-end disabled-link">

                        Start
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script>
        $(document).ready(function () {
            $('#nationalNumber').on('input', function () {
                var nationalId = $(this).val().trim();
                var $startBtn = $('#startBtn');

                if (nationalId.length === 0) {
                    $startBtn.addClass("disabled-link");
                    $startBtn.attr("href", "#");
                } else {
                    $startBtn.removeClass("disabled-link");

                    // Generate the URL using the known pattern
                    $startBtn.attr("href", `/Customer/GetCustomer?nationalId=${encodeURIComponent(nationalId)}`);
                }
            });
        });
    </script>
}